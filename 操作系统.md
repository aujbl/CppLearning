# 1

1. 操作系统的特征：并发、共享、虚拟、异步

2. OS的发展与分类

    1. 手工操作阶段

    2. 批处理阶段

        1. 单道批处理系统

        2. 多道批处理系统

    3. 分时操作系统

    4. 实时操作系统

        1. 硬实时系统

        2. 软实时系统

    5. 网络操作系统

    6. 分布式操作系统

    7. 个人计算机操作系统

3. OS的运行机制和体系结构

    1. 指令：特权指令和非特权指令

    2. 两种处理器状态：用程序状态字寄存器（PSW）中的某个标志位表示

        1. 用户态（目态）：CPU只能执行非特权指令

        2. 核心态（管态）：都可以执行

    3. 两种程序

        1. 内核程序：核心态执行

        2. 应用程序：用户态执行

    4. 内核：计算机上配置的底层软件，OS最基本、最核心的部分

        1. 时钟管理

        2. 中断处理

        3. 原语：具有原子性，不可中断；调用频繁；最底层、最接近硬件的部分

        4. 对系统资源进行管理的功能

            1. 进程管理

            2. 存储器管理

            3. 设备管理

    5. 体系结构：大内核、微内核

4. 中断和异常（内中断）

    1. 本质：发生中断，意味着需要操作系统介入，CPU进入核心态，开展管理工作

    2. 内中断：信号来自CPU内部；外中断：信号来自CPU外部（信号来源不同）

5. 系统调用

# 2

## 2.1

1. 进程：程序段、数据段、PCB（processing control block）程序控制块

    1. 创建进程：创建进程实体中的PCB，PCB是进程存在的唯一标志

    2. 操作系统通过PCB来管理进程

2. PCB

    1. 进程的组成：进程描述信息、进程控制和管理信息、资源分配清单、处理机相关信息

    2. 进程的组织：链接方式、索引方式

    3. 进程的特征：动态性、并发性、独立性、异步性、结构性

3. 进程的状态与转换

    1. 状态：
    
        1. 运行态：CPU、其他所需资源均到位
        
        2. 就绪态：没有空闲CPU、其他资源到位
        
        3. 阻塞态：等待其他资源到位
        
        4. 创建态
        
        5. 终止态

    2. 状态转换

        1. 就绪态 -> 运行态：进程被调度

        2. 运行态 -> 就绪态：时间片到或CPU被其他进程抢占

        3. 运行态 -> 阻塞态：等待系统资源分配或等待某事件发生（主动行为）

        4. 阻塞态 -> 就绪态：资源分配到位，等待事件发生（被动行为）

4. 进程控制

    1. 用原语实现进程控制：采用开、关中断指令实现；运行在核心态

    2. 相关原语：进程创建、终止、阻塞、唤醒、切换

5. 进程通信

    1. 进程通信：进程之间的信息交换

    2. 各进程拥有相互独立的内存地址空间

    3. 进程通信

        1. 共享存储

            1. 通过共享空间实现，两个进程对共享空间的访问必须是互斥的

            2. 共享存储：基于数据结构的共享、基于存储区的共享

        2. 管道通信

            1. 管道pipe：用于连接读写进程的一个共享文件

            2. 半双工通信，需要两个管道实现双向通信

            3. 各进程互斥地访问管道

            4. 没写满，不能读；没读空，不能写；写满阻塞待读空

            5. 读进程最多只能有一个

        3. 消息传递

            1. 以格式化的消息为单位进行数据交换，包括消息头、消息体

            2. 可以直接通信、间接通信

6. 线程

    1. 线程是一个基本的CPU执行单元，也是程序执行流的最小单位

        1. 线程是处理机调度的单位，进程是资源分配的单位

        2. 有用户级线程、内核级线程

    2. 多线程模型：多对一、一对一、多对多

## 2.2 调度

1. 高级调度（作业调度）：从外存上处于后备队列的作业中挑选一个作业，分配资源，建立进程（建立PCB），获得竞争处理机的权利（后备队列（外存） -> 内存）

2. 引入虚拟存储，提高内存利用率和系统吞吐量，可以将进程挂起（调到外存等待，但PCB不会被调到外存）

3. 中级调度（内存调度）：决定将哪个挂起的进程重新调入内存，调用比高级调用更高（挂起队列（外存） -> 内存）

4. 就绪挂起、阻塞挂起

5. 挂起时：进程被调到外存、阻塞时：进程还在内存中

6. 低级调度（进程调度）：从就绪队列中选择一个进程分配处理机（就绪队列（内存） -> 处理机）

7. 进程调度，可以主动放弃、被动放弃

8. 不能进行进程调度：

    1. 处理中

    2. 进程在系统内核程序临界区中，普通临界区可以进行调度

    3. 原子操作中

9. 进程调度和切换的区别

    1. 切换时需要保存和恢复各种数据

    2. 进程的调度和切换是有代价的

10. 有非抢占式、抢占式

11. 评价指标

    1. CPU利用

    2. 系统吞吐量

    3. 周转时间（完成时间 - 提交时间）

    4. 带权周转时间（周转时间 / 运行时间）

    5. 等待时间（周转时间 - 运行时间 - I/O操作时间）

    6. 响应时间

    7. 响应比 = （等待时间 + 要求服务时间） / 要求服务时间

12. 调度算法

    1. 先来先服务 FCFS

    2. 短作业优先 SJF：当前已到达且运行时间最短的作业

    3. 抢占式短作业优先 SRTN

    4. 高响应比优先 HRRN

13. 调度算法

    1. 时间片轮转 
    
        1. 更注重响应时间

    2. 优先级调度

        1. 抢占式、非抢占式

        2. 可能数字大的优先级高，也可能小的

        3. 静态优先级、动态优先级

    3. 多级反馈队列

        1. 用完一个时间片未执行完，放入下一级队列

        2. 被抢占，回到该级队列的队尾

        3. 已经在最后一级队列，则回到队尾

## 2.3 进程同步、进程互斥

1. 并发性带来了异步性，需要通过进程同步来解决异步问题

2. 进程互斥：同一时间只允许一个进程访问临界资源

    1. 包括四部分：进入区、临界区、退出区、剩余区

    2. 空闲让进、忙则等待、有限等待、让权等待








